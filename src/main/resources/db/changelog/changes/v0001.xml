<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="v0001" author="danielrampanelli">

        <createTable tableName="pagebuilder_page" remarks="TODO">
            <column name="id" type="uuid">
                <constraints nullable="false" unique="true" primaryKey="true"
                    primaryKeyName="pk_5d43b5feeb5ff" />
            </column>
            <column name="archived" type="bool" defaultValueBoolean="false">
                <constraints nullable="false" />
            </column>
            <column name="label" type="varchar(255)">
                <constraints nullable="false" />
            </column>
            <column name="domain_name" type="varchar(255)">
                <constraints nullable="false" />
            </column>
            <column name="path_name" type="varchar(255)">
                <constraints nullable="true" />
            </column>
            <column name="hash" type="varchar(40)">
                <constraints nullable="false" unique="true"
                    uniqueConstraintName="uk_5d445ece1821b_hash" />
            </column>
            <column name="title" type="varchar(255)">
                <constraints nullable="true" />
            </column>
            <column name="description" type="text">
                <constraints nullable="true" />
            </column>
        </createTable>

        <addUniqueConstraint constraintName="uk_5d43bdeb05976_uri"
            tableName="pagebuilder_page" columnNames="domain_name, path_name" />

        <createTable tableName="pagebuilder_page_content" remarks="TODO">
            <column name="id" type="uuid">
                <constraints nullable="false" unique="true" primaryKey="true"
                    primaryKeyName="pk_5d43bd67151c6" />
            </column>
            <column name="page_id" type="uuid">
                <constraints nullable="false"
                    foreignKeyName="fk_5d43be892a8ad_page_id"
                    referencedTableName="pagebuilder_page" referencedColumnNames="id"
                    deleteCascade="true" />
            </column>
            <column name="tag_name" type="varchar(255)">
                <constraints nullable="false" />
            </column>
            <column name="assets" type="text">
                <constraints nullable="false" />
            </column>
            <column name="markup" type="text">
                <constraints nullable="false" />
            </column>
            <column name="position" type="integer" defaultValueNumeric="0">
                <constraints nullable="false" />
            </column>
        </createTable>

    </changeSet>

</databaseChangeLog>