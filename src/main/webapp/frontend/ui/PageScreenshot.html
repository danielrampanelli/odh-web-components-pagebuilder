<dom-module id="pagebuilder-page-screenshot">
    <template>
		<style>
		    :host {
		        width: 100%;
		    }
		
			#image {
				display: none;
				max-width: 100%;
			}
			
			#placeholder {
			    box-sizing: border-box;
			    border: 8px dashed #cccccc;
				display: block;
			    padding: 6em 2em;
			    text-align: center;
			}
		</style>
	    <img id="image" />
	    <div id="placeholder">Preview is being generated...</div>
    </template>
    <script>
        class PageScreenshot extends Polymer.Element {
            static get is() {
                return 'pagebuilder-page-screenshot';
            }
            
            load(url) {
            	var self = this;
            	
            	var image = this.shadowRoot.getElementById('image');
            	var placeholder = this.shadowRoot.getElementById('placeholder');
                var urlCreator = window.URL || window.webkitURL;
                
                fetch(url).then(function(response) {
                    console.log(response);
                    
                    response.blob().then(function(data) {
                    	placeholder.style.display = 'none';
                    	image.style.display = 'block';
                        image.src = urlCreator.createObjectURL(data);
                    });
                });
            }
            
            ready() {
                super.ready();
            }
        }

        customElements.define(PageScreenshot.is, PageScreenshot);
    </script>
</dom-module>